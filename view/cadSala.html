<body>
<div class="row" style="padding: 16px;">
    <!-- Form Name -->
    <legend><a href="index.php?pag=Infraestrutura"><span class="glyphicon glyphicon-chevron-left"></span> Voltar </a> | Cadastro de Novas Salas</legend>
    <form class="form-horizontal" action="control/setInfra.php?tipo=sala" method="POST">

        <div class="form-group">
            <label class="col-md-4 control-label"></label>
            <div class="col-md-4">
                <div class="input-group">
                    <select id="tipoPredio" name="predio_id" class="selectpicker" title="Escolha um predio" required="required">

                    </select>
                </div><!-- /input-group -->
            </div>
        </div><!-- /form-group -->

        <div class="form-group">
            <label class="col-md-4 control-label" for="nome">Nome</label>
            <div class="col-md-4">
                <input id="nome" name="nome" type="text" placeholder="Sala de desenho"  class="form-control input-md" required="">
            </div>
        </div>

        <div class="col-md-4 col-md-offset-4"><!-- Submit -->
            <input id="enviar" type="submit" class="btn btn-primary btn-block" value="Cadastrar" />
        </div>
    </form>
</div>

<script type="text/javascript">
    // language=JQuery-CSS
    $('#tbody').on("load", ajaxLoad());

    //Recuperando as informações
    function ajaxLoad(){
        var body = $('#tipoPredio');
        //colocando uma mensagem de load para o usuario
        body.append('<div class="loader"></div>');
        var xhttp = new XMLHttpRequest();//Objeto Ajax
        xhttp.onreadystatechange = function(){//toda vez que mudar estado chama a funcao
            if(xhttp.readyState === 4){//estado 4 é quando recebe a resposta
                $(".loader").remove();
                body.empty();
                jsonParse(this.responseText);

            }
        };
        xhttp.open("GET", "control/getInfra.php?tipo=predio");
        xhttp.send();

    }

    function jsonParse(resposta) {
        var corpo = $('#tipoPredio');
        var objJson = JSON.parse(resposta);
        for(var i in objJson){
            corpo.append(
                '<option value="' + objJson[i].id_predio+'">' + objJson[i].nome + '</option>' );
        }
    }

</script>
</body>