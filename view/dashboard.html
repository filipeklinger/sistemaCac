<body>
<div class="dashboard">
    <!-- Sidebar Holder -->
    <nav class="sidebar">
        <!--TODO: float icon right no modo ativo-->
        <div class="sidebar-header">
            <span class="brand">CacSys &nbsp;&nbsp; | &nbsp;&nbsp;</span><span></span>
            <a href="#" id="sidebarCollapse"><i id="arrow" class="glyphicon glyphicon-chevron-left"></i></a>
        </div>
        <ul class="list-unstyled components">
            <li class="active">
                <a href="#homeSubmenu">
                    <i class="glyphicon glyphicon-home"></i>
                    Home
                </a>
            </li>
            <li>
                <a href="#infraSubmenu" data-toggle="collapse" aria-expanded="false">
                    <i class="glyphicon glyphicon-dashboard"></i>
                    Infra
                </a>
                <ul class="collapse list-unstyled" id="infraSubmenu">
                    <li><a href="?pag=Infraestrutura">Gerenciar</a></li>
                    <li><a href="?pag=Cad.Predio">Novo predio</a></li>
                    <li><a href="?pag=Cad.Sala">Nova sala</a></li>
                </ul>
            </li>
            <li>
                <a href="#oficinasSubmenu" data-toggle="collapse" aria-expanded="false">
                    <i class="glyphicon glyphicon-knight"></i>
                    oficinas
                </a>
                <ul class="collapse list-unstyled" id="oficinasSubmenu">
                    <li><a href="?pag=Oficina">Gerenciar</a></li>
                    <li><a href="?pag=Cad.Oficina">Nova Oficina</a></li>
                </ul>
            </li>
            <li>
                <a href="#turmasSubmenu" data-toggle="collapse" aria-expanded="false">
                    <i class="glyphicon glyphicon-education"></i>
                    Turmas
                </a>
                <ul class="collapse list-unstyled" id="turmasSubmenu">
                    <li><a href="?pag=Turmas">Gerenciar</a></li>
                    <li><a href="?pag=Cad.Turma">Nova turma</a></li>
                </ul>
            </li>
            <li>
                <a href="#usuariosSubmenu" data-toggle="collapse" aria-expanded="false">
                    <i class="glyphicon glyphicon-user"></i>
                    Usuários
                </a>
                <ul class="collapse list-unstyled" id="usuariosSubmenu">
                    <li><a href="?pag=Usuarios">Gerenciar</a></li>
                    <li><a href="?pag=Cad.Pessoa">Novo usuário</a></li>
                </ul>
            </li>
            <li>
                <a href="control/main.php?req=logout">
                    <i class="glyphicon glyphicon-log-out"></i>
                    Sair
                </a>
            </li>
        </ul>
    </nav>

    <!-- Page Content Holder -->
    <div class="content">
        <!--h2>DashBoard</h2-->

        <!--TODO: PROGRAMAR QUADRO DE AVISOS-->

        <p id="usr">
            Olá <span id="user"></span>, seu nivel de acesso é <span id="nv"></span>
        </p>

        <p>
            Para criar um link a outras paginas deve-se criar um parametro get.<br/>
            por exemplo <a href="?pag=DashBoard">A página</a> de DashBoard<br/>
        </p>

        <table class="table table-striped">
            <thead>
            <tr>
                <th class='col-md-2'>Oficina</th>
                <th class='col-md-2'>Dia da semana</th>
                <th class='col-md-2'>Horario</th>
                <th class='col-md-2'>Sala</th>
                <th class='col-md-2'>Professor</th>
                <th class='col-md-2'>Vagas</th>
            </tr>
            </thead>
            <tbody id="t_oficinas"></tbody>
        </table>
    </div>
</div>

<script type="text/javascript">

    $(document).on("load", loader());

    function loader() {
        ajaxLoadGET('control/main.php?req=selecUsuarioLogado', parseUsuario, '#nv');
        ajaxLoadGET('control/main.php?req=selectTurmaAtiva', parseTurmaHorario, '#t_oficinas');
    }

    function parseUsuario(resposta) {
        var jsonObj = JSON.parse(resposta);
        $('#user').append(jsonObj.nome);
        $('#nv').append(jsonObj.nv_acesso);
    }

    function parseTurmaHorario(resposta, corpo) {
        var objJson = JSON.parse(resposta);
        for (i in objJson) {
            corpo.append(
                '<tr>' +
                '<td class=\'col-md-2\'>' + objJson[i].oficina + '</td>' +
                '<td class=\'col-md-2\'>' + getDiaSemana(objJson[i]) + '</td>' +
                '<td class=\'col-md-2\'>' + objJson[i].inicio + " as " + objJson[i].fim + '</td>' +
                '<td class=\'col-md-2\'>' + objJson[i].sala + '</td>' +
                '<td class=\'col-md-2\'>' + objJson[i].professor + '</td>' +
                '<td class=\'col-md-2\'>' + objJson[i].vagas + '</td>' +
                '</tr>');
        }
    }


    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('.sidebar').toggleClass('active');
            $('#arrow').toggleClass('glyphicon-chevron-left');

            if (($('#arrow').hasClass('glyphicon-chevron-left'))) {
                $('#arrow').removeClass('glyphicon-chevron-right');
            }
            else {
                $('#arrow').addClass('glyphicon-chevron-right');
            }
        });
    });
</script>
</body>