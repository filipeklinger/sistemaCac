<body>
<div class="container-fluid dashboard">
    <div class="col-md-3 sidebar">
        <!-- TODO: nav não é responsivo e não colapsam ao diminuir a tela  -->
        <div class="row">
            <div class="branding"></div>
        </div>
        <nav class="row">
            <ul class="nav nav-stacked navbar-collapse" id="targeto">
                <li class=""><a class="navbar-link" href="?pag=Infraestrutura">Infraestrutura</a></li>
                <li class=""><a class="navbar-link" href="?pag=Cad.Oficina">Novas oficinas</a></li>
                <li class=""><a class="navbar-link" href="?pag=Cad.Turma">Novas Turmas</a></li>
                <li class=""><a class="navbar-link" href="?pag=Cad.Pessoa">Novos Usuarios</a></li>
                <li class=""><a class="navbar-link" href="control/main.php?req=99">Sair</a></li>
            </ul>
        </nav>
    </div>

    <div class="col-md-9">
        <h2>DashBoard</h2>

        <p id="usr">
            Olá <span id="user"></span>, seu nivel de acesso é <span id="nv"></span>
        </p>

        <p>
            Para criar um link a outras paginas deve-se criar um parametro get.<br/>
            por exemplo <a href="?pag=DashBoard">A página</a> de DashBoard<br/>
        </p>

        <table class="table table-striped">
            <thead>
            <tr>
                <th class='col-md-2'>Oficina</th>
                <th class='col-md-2'>Dia da semana</th>
                <th class='col-md-2'>Horario</th>
                <th class='col-md-2'>Sala</th>
                <th class='col-md-2'>Professor</th>
                <th class='col-md-2'>Vagas</th>
            </tr>
            </thead>
            <tbody id="t_oficinas"></tbody>
        </table>
    </div>
</div>

<script type="text/javascript">

    $(document).on("load",loader());

    function loader() {
        ajaxLoadGET('control/main.php?req=98',parseUsuario,'#nv');
        ajaxLoadGET('control/main.php?req=13',parseTurmaHorario,'#t_oficinas');
    }
    function parseUsuario(resposta) {
        var jsonObj = JSON.parse(resposta);
        $('#user').append(jsonObj.nome);
        $('#nv').append(jsonObj.nv_acesso);
    }

    function parseTurmaHorario(resposta,corpo) {
        var objJson = JSON.parse(resposta);
        for(i in objJson) {
            corpo.append(
                '<tr>' +
                '<td class=\'col-md-2\'>'+objJson[i].oficina+'</td>' +
                '<td class=\'col-md-2\'>'+getDiaSemana(objJson[i])+'</td>' +
                '<td class=\'col-md-2\'>'+objJson[i].inicio+" as "+objJson[i].fim+'</td>' +
                '<td class=\'col-md-2\'>'+objJson[i].sala+'</td>' +
                '<td class=\'col-md-2\'>'+objJson[i].professor+'</td>' +
                '<td class=\'col-md-2\'>'+objJson[i].vagas+'</td>'+
                '</tr>');
        }
    }

    function getDiaSemana(objdia) {
        var diasSemana = "";
        if(objdia.segunda === "1") diasSemana = "-Segunda";
        if(objdia.terca === "1") diasSemana += " - Terça";
        if(objdia.quarta === "1") diasSemana += " - Quarta";
        if(objdia.quinta === "1") diasSemana += " - Quinta";
        if(objdia.sexta === "1") diasSemana += " - Sexta";
        return diasSemana;
    }
</script>
</body>